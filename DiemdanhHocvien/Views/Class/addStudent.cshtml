@model IEnumerable<DiemdanhHocvien.DataAccess.Student>

@{
    ViewBag.Title = "Index";
}
@section _Header{
    <link href="~/Assets/dashboard/vendor/datatables/dataTables.bootstrap4.min.css" rel="stylesheet">
}
<!-- Container Fluid-->
<div class="container-fluid" id="container-wrapper">
    <div class="d-sm-flex align-items-center justify-content-between mb-1">
        @*<h1 class="h3 mb-0 text-gray-800">DataTables</h1>*@

        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="./">Home</a></li>
            <li class="breadcrumb-item">Tables</li>
            <li class="breadcrumb-item active" aria-current="page">DataTables</li>
        </ol>
        <div class="card-header py-3 d-flex flex-row align-items-center justify-content-start">

            <a class="btn btn-outline-success ml-2">
                Count: @Model.Count()
            </a>
        </div>

    </div>
    <!-- form atribute call -->
    <form action="#" method="post" id="form" name="form">@Html.AntiForgeryToken()</form>
    <input value="@ViewBag.classId" form="form" name="classId" type="number" hidden />
    <button type="submit" value="addStudent" class="btn btn-primary" form="form">  submit  </button>

    <!-- Row -->
    <div class="row">
        <!-- DataTable with Hover -->
        <div class="col-lg-12">
            <div class="card mb-4">
                <div class="table-responsive p-3">
                    <table class="table align-items-center table-flush table-hover record_table" id="dataTableHover">
                        <thead class="thead-light">
                            <tr>
                                <th>
                                    @Html.DisplayNameFor(model => model.holyName)
                                </th>
                                <th>
                                    @Html.DisplayNameFor(model => model.lastName)
                                </th>
                                <th>
                                    @Html.DisplayNameFor(model => model.firstName)
                                </th>
                                <th>
                                    @Html.DisplayNameFor(model => model.BOD)
                                </th>
                                <th>
                                    @Html.DisplayNameFor(model => model.numPhone)
                                </th>
                                <th>
                                    @Html.DisplayNameFor(model => model.email)
                                </th>
                                <th>
                                    @Html.DisplayNameFor(model => model.parentId)
                                </th>
                                <th>
                                    @Html.DisplayNameFor(model => model.classId)
                                </th>

                            </tr>
                        </thead>
                        <tfoot>
                            <tr>
                                <th>
                                    @Html.DisplayNameFor(model => model.holyName)
                                </th>
                                <th>
                                    @Html.DisplayNameFor(model => model.lastName)
                                </th>
                                <th>
                                    @Html.DisplayNameFor(model => model.firstName)
                                </th>
                                <th>
                                    @Html.DisplayNameFor(model => model.BOD)
                                </th>
                                <th>
                                    @Html.DisplayNameFor(model => model.numPhone)
                                </th>
                                <th>
                                    @Html.DisplayNameFor(model => model.email)
                                </th>
                                <th>
                                    @Html.DisplayNameFor(model => model.parentId)
                                </th>
                                <th>
                                    @Html.DisplayNameFor(model => model.classId)
                                </th>

                            </tr>
                        </tfoot>
                        <tbody>

                            @{ int key = 0; var lstnameClass = ViewBag.lstnameClass;}
                            @foreach (var item in Model)
                            {
                                <tr>
                                    <td><input type="checkbox" name="lstStudent" form="form" value="@item.id" /></td>
                                    <td>
                                        @Html.DisplayFor(modelItem => item.lastName)
                                    </td>
                                    <td>
                                        @Html.DisplayFor(modelItem => item.firstName)
                                    </td>
                                    <td>
                                        @Html.DisplayFor(modelItem => item.holyName)
                                    </td>
                                    <td>
                                        @Html.DisplayFor(modelItem => item.BOD)
                                    </td>
                                    <td>
                                        @Html.DisplayFor(modelItem => item.numPhone)
                                    </td>
                                    <td>
                                        @Html.DisplayFor(modelItem => item.email)
                                    </td>
                                    <td>
                                        @lstnameClass[key]
                                    </td>

                                </tr>
                                key++;
                            }
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
    <!--Row-->


</div>
<!---Container Fluid-->

@section _Footer{

    <!-- Page level plugins -->
    <script src="~/Assets/dashboard/vendor/datatables/jquery.dataTables.min.js"></script>
    <script src="~/Assets/dashboard/vendor/datatables/dataTables.bootstrap4.min.js"></script>
    <script src="~/Assets/dashboard/vendor/datatables/dataTables.buttons.min.js"></script>
    <script src="~/Assets/dashboard/vendor/datatables/buttons.html5.min.js"></script>
    <script src="~/Assets/dashboard/vendor/datatables/jszip.min.js"></script>

    <!-- Page level custom scripts -->
    <script>
        $(document).ready(function () {
            $('#dataTableHover').DataTable({
                dom: 'Blfrtip',
                buttons: [
                    'selectAll',
                    'selectNone'
                ]
            }); // ID From dataTable with Hover
        });
    </script>
    <script>
        $("#actionName").text("Add Student to class")
    </script>


    @*click row in table checkbox*@
    <script>
        // set timeout
        var tid = setTimeout(mycode, 0);
        function mycode() {
            
                $('.record_table tr').click(function (event) {
                    if (event.target.type !== 'checkbox') {
                        $(':checkbox', this).trigger('click');
                        if ($(':checkbox', this)[0].checked) {
                            $(this).css("background-color", "#6777ef6b");
                        } else {
                            $(this).css("background-color", "");
                        }
                    }


                });
             
            tid = setTimeout(mycode, 10) // repeat myself
        }
        function abortTimer() { // to be called when you want to stop the timer
            clearTimeout(tid);
        }
       
    </script>
}